class ChargesController < ApplicationController
  def new
  end

  def create
    binding.pry
    @amount = params[:total]
    customer = Stripe::Customer.create(email: params[:stripeemail],
                                       source: params[:stripeToken])
    charge = Stripe::Charge.create( customer: customer.id,
                                    amount: @amount,
                                    descriotion: 'Mock Stripe Customer',
                                    currency: 'usd')
    rescue Stripe::CardError => e
      flash[:error] = e.message
      redirect_to new_charge_path
  end
end
